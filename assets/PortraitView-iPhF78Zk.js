const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HeroPortraits-6utYZYwj.js","assets/index-Bxa9UmCe.js","assets/index-b4Eu2IE8.css","assets/utilities-CH50U7YB.js"])))=>i.map(i=>d[i]);
import{d as g,r as s,j as e,S as h,L as y,_}from"./index-Bxa9UmCe.js";import{FaArrowRight as N}from"./index-CSEz-94N.js";import"./iconBase-BePspikF.js";const v=s.lazy(()=>_(()=>import("./HeroPortraits-6utYZYwj.js"),__vite__mapDeps([0,1,2,3]))),f="/StarLoomPublic/",A=({count:c=3,sort:l="latest"})=>{const p=!g().pathname.startsWith("/extras/portrait/hero"),[o,u]=s.useState([]),[j,d]=s.useState(!0),[x,m]=s.useState("");return s.useEffect(()=>{const t=new AbortController;async function w(){try{d(!0),m("");let r=[...(await(await fetch(`${f}data/heroes_index.json`,{signal:t.signal})).json()).heroes];l==="latest"?r.sort((a,n)=>n.id.localeCompare(a.id)):l==="oldest"&&r.sort((a,n)=>a.id.localeCompare(n.id)),r=r.slice(0,c);const b=await Promise.all(r.map(async a=>(await fetch(`${f}data/heroes/${a.details_file}`,{signal:t.signal})).json()));u(b)}catch(i){i.name!=="AbortError"&&(console.error(i),m(i.message||"Failed to fetch heroes"))}finally{d(!1)}}return w(),()=>t.abort()},[c,l]),j?e.jsx(h,{size:40}):x?e.jsx("div",{className:"text-red-500 text-center mt-10",children:x}):o.length?e.jsxs("div",{className:"w-full flex flex-col gap-12",children:[p&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-text",children:"Latest Hero Portraits"}),o[0]&&e.jsxs(y,{to:`/extras/splashart/hero/${o[0].name}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white text-sm font-semibold rounded-lg shadow-md hover:bg-primary/80 transition-all duration-200",children:["Browse Portraits ",e.jsx(N,{className:"text-xs"})]})]}),o.map(t=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text mb-6 capitalize",children:t.name}),e.jsx(s.Suspense,{fallback:e.jsx(h,{size:40}),children:e.jsx(v,{heroes:[t],linkType:"preview"})})]},t.id||t.name))]}):e.jsx("p",{className:"text-text-dull text-center mt-10",children:"No heroes found."})};export{A as default};
