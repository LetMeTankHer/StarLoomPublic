import{r as a,j as e,S as y}from"./index-BH3WP3JE.js";import{s as w}from"./utilities-CH50U7YB.js";const j="/StarLoomPublic/";function S({ids:s=null,limit:o="all",sort:c="oldest"}={}){const[h,f]=a.useState([]),[r,l]=a.useState(!0),[d,t]=a.useState("");return a.useEffect(()=>{const i=new AbortController;async function m(){l(!0),t("");try{let n=(await(await fetch(`${j}data/heroes_index.json`,{signal:i.signal})).json()).heroes||[];if(s){const u=Array.isArray(s)?s.map(String):[String(s)];n=n.filter(b=>{const g=b.id,v=b.name.toLowerCase();return u.some(p=>g===p.padStart(3,"0")||g===p||v===p.toLowerCase())})}c==="latest"&&(n=n.slice().reverse()),o!=="all"&&Number.isInteger(o)&&(n=n.slice(0,o));const N=await Promise.all(n.map(async u=>{const g=await(await fetch(`${j}data/heroes/${u.details_file}`,{signal:i.signal})).json();return{...u,...g}}));f(N)}catch(x){x.name!=="AbortError"&&(console.error(x),t(x.message||"Failed to load hero data"))}finally{l(!1)}}return m(),()=>i.abort()},[s,o,c]),{heroes:h,loading:r,error:d}}const L="/StarLoomPublic/";function D(){const[s,o]=a.useState("all"),[c,h]=a.useState([]),f=a.useMemo(()=>["miya","nana","saber"],[]),{heroes:r,loading:l,error:d}=S({ids:s==="single"?"miya":s==="multiple"?f:void 0,limit:s==="limit"?5:void 0});return a.useEffect(()=>{l||(h(t=>[...t,`TestCase: ${s} | Loaded ${r.length} hero${r.length>1?"es":""}`]),console.log(`TestCase: ${s}`,r))},[r,s,l]),l?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(y,{size:60})}):d?e.jsxs("div",{className:"text-red-500 text-center mt-10",children:["❌ Error: ",d]}):r.length?e.jsxs("div",{className:"pt-56 px-6",children:[e.jsx("div",{className:"flex gap-3 mb-6",children:["all","single","multiple","limit"].map(t=>e.jsx("button",{onClick:()=>o(t),className:`px-4 py-2 rounded-lg font-semibold transition ${s===t?"bg-primary text-white":"bg-background border"}`,children:t.toUpperCase()},t))}),e.jsxs("h1",{className:"text-2xl font-bold mb-6",children:["✅ Loaded ",r.length," hero",r.length>1?"es":""]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:r.map(t=>{const m=Object.values(t.skins||{})[0]?.avatars?.default||"";return e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-card rounded-xl shadow hover:shadow-md transition",children:[m?e.jsx("img",{src:w(`${L}${m}`),alt:t.name,className:"w-24 h-24 rounded-full object-cover border-2 border-primary"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-300 flex items-center justify-center",children:"❌ No Avatar"}),e.jsx("p",{className:"font-semibold text-text text-center",children:t.name}),e.jsxs("p",{className:"text-sm text-text/70 text-center",children:["ID: ",t.id]})]},t.id)})}),e.jsxs("div",{className:"mt-8 p-4 bg-background border rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Fetch Log:"}),e.jsx("ul",{className:"text-sm text-text/70",children:c.map((t,i)=>e.jsx("li",{children:t},i))})]})]}):e.jsx("div",{className:"text-center mt-10 text-gray-400",children:"No heroes found."})}export{D as default};
