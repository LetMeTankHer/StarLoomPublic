import{r as s,d as O,j as e,L as T}from"./index-Bxa9UmCe.js";import{FaPause as V,FaPlay as q}from"./index-CSEz-94N.js";import"./iconBase-BePspikF.js";const Y=({heroName:d,skinName:u})=>{const[p,j]=s.useState(null),[m,w]=s.useState({background:[],heroSelectionDialog:{},inGameDialog:{},mainInterfaceDialog:{}}),[D,k]=s.useState(!0),[_,I]=s.useState("english"),[L,G]=s.useState("english"),[$,A]=s.useState("english"),[E,y]=s.useState(null),f=s.useRef({}),H=!O().pathname.startsWith("/extras/audio/hero");if(s.useEffect(()=>{async function a(){try{const t="/StarLoomPublic/",r=await fetch(`${t}data/heroes_index.json`),{heroes:n}=await r.json(),o=n.find(h=>h.name===d);if(!o)throw new Error(`Hero "${d}" not found`);const c=(await(await fetch(`${t}data/heroes/${o.details_file}`)).json()).skins[u];if(!c)throw new Error(`Skin "${u}" not found`);j({hero:o,skin:c});const x=async h=>{if(!h)return null;try{const v=await fetch(t+h);return v.ok?await v.json():null}catch{return null}},R=await x(c.audio?.hero_selection?.background),F=await x(c.audio?.hero_selection?.dialog),B=await x(c.audio?.in_game_dialog),C=await x(c.audio?.main_interface_dialog);w({background:R?.hero_selection?.background||[],heroSelectionDialog:F?.hero_selection?.dialog||{},inGameDialog:B?.in_game_dialog||{},mainInterfaceDialog:C?.main_interface_dialog||{}})}catch(t){console.error("Error fetching hero/skin/audio:",t),j(null),w({background:[],heroSelectionDialog:{},inGameDialog:{},mainInterfaceDialog:{}})}finally{k(!1)}}a()},[d,u]),D)return e.jsx("p",{children:"Loading..."});if(!p)return e.jsx("p",{className:"text-red-400",children:"Error fetching hero or skin."});const{hero:S,skin:l}=p,N="/StarLoomPublic/",P=a=>{switch(a){case"standard":return"bg-blue-500";case"variant":return"bg-purple-500";case"unique":return"bg-orange-500";default:return"bg-gray-500"}},J=a=>{const t=f.current[a];t&&(t.paused?(Object.values(f.current).forEach(r=>r.pause()),y(a),t.play()):(t.pause(),y(null)))},M=(a,t)=>e.jsxs("div",{className:"audio-item flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:e.jsx("button",{className:"custom-play-btn w-full h-full rounded-full bg-primary flex items-center justify-center text-white transition transform hover:scale-105",onClick:()=>J(t),children:E===t?e.jsx(V,{}):e.jsx(q,{})})}),e.jsxs("div",{className:"flex flex-col w-full min-w-0",children:[e.jsx("p",{className:"text-text font-bold truncate",children:a.name||"..."}),e.jsx("p",{className:"text-text-dull text-sm truncate",children:a.subtitle||"..."}),e.jsx("p",{className:"text-text-dull text-xs italic truncate",children:a.translation||"..."}),e.jsx("audio",{ref:r=>f.current[t]=r,src:N+a.file,preload:"none"})]})]},t),g=(a,t="",r=!1)=>{if(r&&["heroSel","inGame","mainInterface"].includes(t)){const n={heroSel:"Hero Selection Dialog: Same as Standard",inGame:"In-Game Dialog: Same as Standard",mainInterface:"Main Interface Dialog: Same as Standard"};return e.jsx("p",{className:"text-text-dull italic mb-2",children:n[t]})}return!a||a.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No audios found."}):e.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-96 overflow-y-auto mb-6 px-4",children:a.map((n,o)=>M(n,`${t}-${o}`))})},b=(a,t,r,n)=>{const o=Object.keys(a);if(o.length===0){const i=l.audio_type==="variant";return g([],n,i)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"languageTabs sticky top-0 z-10 py-3 flex justify-between gap-2 overflow-x-auto mb-3 text-text-dull border-b-2 border-dotted  ",children:o.map(i=>e.jsx("button",{className:`px-3 py-1 rounded ${t===i?"bg-primary text-white":"bg-bg text-text"}`,onClick:()=>r(i),children:i},i))}),g(a[t]||[],n,l.audio_type==="variant")]})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 gap-12 ",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[e.jsx("img",{src:N+l.avatars.default,alt:S.name,className:"w-20 h-20 rounded-full object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-end gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-xl font-bold text-text whitespace-nowrap",children:S.name}),e.jsx("span",{className:`px-2 py-[2px] text-xs font-semibold rounded-full shadow-md whitespace-nowrap ${P(l.audio_type)} text-white`,children:l.audio_type})]}),e.jsx("p",{className:"text-sm text-text-dull",children:l.name})]})]}),H&&e.jsx(T,{to:`/extras/audio/hero/${d}/${u}`,className:"px-3 py-1 bg-primary text-white rounded-lg hover:bg-primary/80 transition self-start sm:self-auto whitespace-nowrap",children:"Browse All Heroes â†’"})]}),e.jsxs("section",{className:"border-b-2 border-primary mt-4 scrollbar-thin-alt scrollbar-thumb-primary scrollbar-track-background",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-4",children:"Hero Selection"}),e.jsx("h3",{className:"text-lg font-semibold text-text mb-4",children:"Background"}),g(m.background,"background",!1),e.jsx("h3",{className:"text-lg font-semibold text-text mb-4",children:"Dialog"}),b(m.heroSelectionDialog,_,I,"heroSel")]}),e.jsxs("section",{className:"border-b-2 border-primary mt-4 scrollbar-thin-alt scrollbar-thumb-primary scrollbar-track-background",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-4",children:"In-Game Dialog"}),b(m.inGameDialog,L,G,"inGame")]}),e.jsxs("section",{className:"border-b-2 border-primary mt-4 scrollbar-thin-alt scrollbar-thumb-primary scrollbar-track-background",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Main Interface Dialog"}),b(m.mainInterfaceDialog,$,A,"mainInterface")]})]})};export{Y as default};
