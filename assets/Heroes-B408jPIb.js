const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HeroAvatars-Brt8Ybim.js","assets/index-Bxa9UmCe.js","assets/index-b4Eu2IE8.css","assets/utilities-CH50U7YB.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,L as b,S as h,_ as v}from"./index-Bxa9UmCe.js";const m="/StarLoomPublic/",y=a.lazy(()=>v(()=>import("./HeroAvatars-Brt8Ybim.js"),__vite__mapDeps([0,1,2,3]))),w=()=>{const[l,g]=a.useState({}),[u,j]=a.useState({}),p=a.useRef(new Set),d=a.useRef(null),i=a.useRef(null);return a.useEffect(()=>{(async()=>{try{const c=await(await fetch(`${m}data/heroes_index.json`)).json(),o={};c.heroes.forEach(x=>{const n=x.name[0].toUpperCase();o[n]||(o[n]=[]),o[n].push(x)}),g(o)}catch(s){console.error("Failed to fetch heroes index:",s)}})()},[]),a.useEffect(()=>{if(i.current)return d.current=new IntersectionObserver(t=>{t.forEach(async s=>{if(s.isIntersecting){const c=s.target.dataset.letter,o=l[c];if(!o||p.current.has(c))return;const n=(await Promise.allSettled(o.map(async r=>await(await fetch(`${m}data/heroes/${r.details_file}`)).json()))).filter(r=>r.status==="fulfilled"&&r.value).map(r=>r.value).sort((r,f)=>r.name.localeCompare(f.name));p.current.add(c),j(r=>({...r,[c]:n})),d.current.unobserve(s.target)}})},{rootMargin:"100px"}),Object.keys(l).forEach(t=>{const s=i.current?.querySelector(`[data-letter="${t}"]`);s&&d.current.observe(s)}),()=>d.current?.disconnect()},[l]),e.jsxs("div",{className:"px-6 my-30",children:[e.jsxs("nav",{className:"flex items-center text-sm text-gray-400 space-x-2 mb-6",children:[e.jsx(b,{to:"/",className:"hover:text-primary text-text-dull",children:"Home"}),e.jsx("span",{children:">"}),e.jsx("span",{className:"text-text hover:text-primary",children:"Heroes"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[3fr_1fr] gap-6",children:[e.jsx("div",{ref:i,className:"space-y-8 border bg-background rounded-xl p-4 min-w-[300px]",children:Object.keys(l).sort().map(t=>e.jsxs("div",{"data-letter":t,className:"bg-background border-b-2 border-text p-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-text",children:t}),u[t]?e.jsx(a.Suspense,{fallback:e.jsx(h,{size:40,className:"py-6"}),children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:u[t].map(s=>e.jsx(y,{hero:s},s.id))})}):e.jsx(h,{size:40,className:"py-6"})]},t))}),e.jsx("aside",{className:"hidden lg:block min-w-[200px] space-y-6",children:e.jsxs("div",{className:"sticky top-28 bg-background border rounded-xl shadow-md p-4",children:[e.jsx("h3",{className:"font-bold mb-3 text-text",children:"Sponsored"}),e.jsx("a",{href:"https://example.com/",target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:`${m}assets/ads/sample-ad.jpg`,alt:"Advertisement",className:"rounded-lg shadow"})})]})})]})]})};export{w as default};
